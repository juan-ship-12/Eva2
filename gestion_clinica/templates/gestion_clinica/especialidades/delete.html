{% extends 'gestion_clinica/base.html' %}

{% block title %}Eliminar Especialidad - Salud Vital{% endblock %}

{% block header_title %}Eliminar Especialidad{% endblock %}

{% block content %}
<div class="card">
    <h2>⚠️ Confirmar Eliminación</h2>
    <p>¿Está seguro de que desea eliminar esta especialidad del sistema?</p>
    
    <div style="margin-top: 16px;">
        <a href="{% url 'especialidad-list' %}" class="btn btn-secondary">← Volver a Especialidades</a>
    </div>
</div>

<div class="card">
    <h2>Datos de la Especialidad a Eliminar</h2>
    
    <div style="background: #fff3cd; border: 1px solid #ffeaa7; border-radius: 6px; padding: 16px; margin-bottom: 20px;">
        <h3 style="color: #856404; margin: 0 0 12px 0;">⚠️ Advertencia</h3>
        <p style="color: #856404; margin: 0;">Esta acción no se puede deshacer. Se eliminarán todos los datos relacionados con esta especialidad.</p>
    </div>
    
    <div style="background: #f6f8fa; border: 1px solid #d0d7de; border-radius: 6px; padding: 20px; margin-bottom: 20px;">
        <h3 style="margin: 0 0 16px 0; color: #24292f;">Información de la Especialidad</h3>
        
        <div style="display: grid; grid-template-columns: 1fr; gap: 16px;">
            <div>
                <strong>Nombre:</strong> {{ especialidad.nombre }}
            </div>
            <div>
                <strong>Descripción:</strong> {{ especialidad.descripcion }}
            </div>
        </div>
    </div>
    
    <form method="POST" id="deleteForm" style="margin-top: 20px;">
        {% csrf_token %}
        
        <div style="display: flex; gap: 12px; margin-top: 24px;">
            <button type="button" id="deleteBtn" class="btn" style="background: #d73a49; color: white; border: none; padding: 12px 24px; border-radius: 6px; font-weight: 600;">
                🗑️ Eliminar Especialidad
            </button>
            <a href="{% url 'especialidad-list' %}" class="btn btn-secondary" style="background: #f6f8fa; color: #24292f; border: 1px solid #d0d7de; padding: 12px 24px; border-radius: 6px; text-decoration: none;">
                ❌ Cancelar
            </a>
        </div>
    </form>
</div>

{% if messages %}
    {% for message in messages %}
        <div style="background: #d1ecf1; color: #0c5460; padding: 12px; border-radius: 6px; margin-top: 16px; border: 1px solid #bee5eb;">
            {{ message }}
        </div>
    {% endfor %}
{% endif %}

<script>
document.getElementById('deleteBtn').addEventListener('click', function() {
    Swal.fire({
        title: '¿Estás seguro?',
        text: 'Esta acción no se puede deshacer. Se eliminará permanentemente la especialidad {{ especialidad.nombre }}.',
        icon: 'warning',
        showCancelButton: true,
        confirmButtonColor: '#d73a49',
        cancelButtonColor: '#6c757d',
        confirmButtonText: 'Sí, eliminar',
        cancelButtonText: 'Cancelar',
        reverseButtons: true
    }).then((result) => {
        if (result.isConfirmed) {
            // Mostrar loading
            Swal.fire({
                title: 'Eliminando...',
                text: 'Por favor espera',
                allowOutsideClick: false,
                showConfirmButton: false,
                willOpen: () => {
                    Swal.showLoading()
                }
            });
            
            // Enviar formulario
            document.getElementById('deleteForm').submit();
        }
    });
});
</script>
{% endblock %}
