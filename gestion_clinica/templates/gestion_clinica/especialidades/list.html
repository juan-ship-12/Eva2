{% extends 'gestion_clinica/base.html' %}

{% block title %}Especialidades - Salud Vital{% endblock %}

{% block header_title %}Especialidades{% endblock %}

{% block content %}
<div class="card">
    <h2>ğŸ¥ GestiÃ³n de Especialidades</h2>
    <p>Administra las especialidades mÃ©dicas del sistema.</p>
    
    <div style="margin-top: 16px;">
        <a href="{% url 'home' %}" class="btn btn-secondary">â† Volver al Inicio</a>
        <a href="{% url 'especialidad-create' %}" class="btn btn-primary">+ Agregar Especialidad</a>
        <a href="/swagger/" class="btn btn-secondary" target="_blank">Ver API Docs</a>
    </div>
</div>

<div class="card">
    <h2>Lista de Especialidades</h2>
    <p>Especialidades mÃ©dicas registradas en el sistema.</p>
    
    <table class="table">
        <thead>
            <tr>
                <th>ID</th>
                <th>Nombre</th>
                <th>DescripciÃ³n</th>
                <th>Acciones</th>
            </tr>
        </thead>
        <tbody>
            {% if especialidades %}
                {% for especialidad in especialidades %}
                <tr>
                    <td>{{ especialidad.id }}</td>
                    <td><strong>{{ especialidad.nombre }}</strong></td>
                    <td>{{ especialidad.descripcion|truncatechars:100 }}</td>
                    <td>
                        <a href="{% url 'especialidad-edit' especialidad.id %}" class="btn btn-secondary" style="margin-right: 8px; text-decoration: none;">Editar</a>
                        <a href="{% url 'especialidad-delete' especialidad.id %}" class="btn" style="background-color: #d73a49; color: white; text-decoration: none;">Eliminar</a>
                    </td>
                </tr>
                {% endfor %}
            {% else %}
                <tr>
                    <td colspan="4" style="text-align: center; color: #656d76; padding: 24px;">
                        <p>No hay especialidades registradas aÃºn.</p>
                        <p style="font-size: 12px; margin-top: 8px;">
                            Haz clic en "Agregar Especialidad" para crear la primera.
                        </p>
                    </td>
                </tr>
            {% endif %}
        </tbody>
    </table>
</div>

<div class="card">
    <h2>InformaciÃ³n de la API</h2>
    <p>Endpoints disponibles para la gestiÃ³n de especialidades:</p>
    
    <div style="background: #f6f8fa; padding: 16px; border-radius: 6px; margin-top: 16px;">
        <h3 style="margin-bottom: 16px;">ğŸ”— Endpoints Interactivos:</h3>
        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 12px;">
            <a href="/api/especialidades/" class="btn btn-primary" target="_blank" style="text-decoration: none; display: block; padding: 12px; border-radius: 6px; background: #2da44e; color: white; text-align: center;">
                <strong>GET /api/especialidades/</strong><br>
                <small>Listar todas las especialidades</small>
            </a>
            <a href="/swagger/" class="btn btn-secondary" target="_blank" style="text-decoration: none; display: block; padding: 12px; border-radius: 6px; background: #f6f8fa; color: #24292f; text-align: center; border: 1px solid #d0d7de;">
                <strong>POST /api/especialidades/</strong><br>
                <small>Crear nueva especialidad (Swagger)</small>
            </a>
            <a href="/swagger/" class="btn btn-secondary" target="_blank" style="text-decoration: none; display: block; padding: 12px; border-radius: 6px; background: #f6f8fa; color: #24292f; text-align: center; border: 1px solid #d0d7de;">
                <strong>PUT/DELETE /api/especialidades/{id}/</strong><br>
                <small>Actualizar/Eliminar (Swagger)</small>
            </a>
        </div>
    </div>
</div>

<script>
function agregarEspecialidad() {
    // Redirigir a Swagger para crear
    window.open('/swagger/', '_blank');
}

function editarEspecialidad(id) {
    // Redirigir a Swagger para editar
    window.open('/swagger/', '_blank');
}

function eliminarEspecialidad(id) {
    if (confirm('Â¿EstÃ¡s seguro de que quieres eliminar esta especialidad?')) {
        // AquÃ­ irÃ­a la lÃ³gica para eliminar
        alert('Funcionalidad de eliminaciÃ³n en desarrollo. Usa Swagger por ahora.');
    }
}
</script>
{% endblock %}
