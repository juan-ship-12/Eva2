{% extends 'gestion_clinica/base.html' %}

{% block title %}Pacientes - Salud Vital{% endblock %}

{% block header_title %}Pacientes{% endblock %}

{% block content %}
<div class="card">
    <h2>üë• Gesti√≥n de Pacientes</h2>
    <p>Administra la informaci√≥n de todos los pacientes del sistema.</p>
    
    <div style="margin-top: 16px;">
        <a href="{% url 'home' %}" class="btn btn-secondary">‚Üê Volver al Inicio</a>
        <a href="{% url 'paciente-create' %}" class="btn btn-primary">+ Agregar Paciente</a>
        <a href="/swagger/" class="btn btn-secondary" target="_blank">Ver API Docs</a>
    </div>
</div>

<div class="card">
    <h2>Lista de Pacientes</h2>
    <p>Aqu√≠ se mostrar√°n todos los pacientes registrados en el sistema.</p>
    
    <table class="table">
        <thead>
            <tr>
                <th>RUT</th>
                <th>Nombre</th>
                <th>Apellido</th>
                <th>Email</th>
                <th>Tel√©fono</th>
                <th>Estado</th>
                <th>Acciones</th>
            </tr>
        </thead>
        <tbody>
            {% if pacientes %}
                {% for paciente in pacientes %}
                <tr>
                    <td>{{ paciente.rut }}</td>
                    <td>{{ paciente.nombre }}</td>
                    <td>{{ paciente.apellido }}</td>
                    <td>{{ paciente.correo }}</td>
                    <td>{{ paciente.telefono }}</td>
                    <td>
                        <span style="color: {% if paciente.activo %}#2da44e{% else %}#d73a49{% endif %};">
                            {% if paciente.activo %}Activo{% else %}Inactivo{% endif %}
                        </span>
                    </td>
                    <td>
                        <a href="{% url 'paciente-edit' paciente.id %}" class="btn btn-secondary" style="margin-right: 8px; text-decoration: none;">Editar</a>
                        <a href="{% url 'paciente-delete' paciente.id %}" class="btn" style="background-color: #d73a49; color: white; text-decoration: none;">Eliminar</a>
                    </td>
                </tr>
                {% endfor %}
            {% else %}
                <tr>
                    <td colspan="7" style="text-align: center; color: #656d76; padding: 24px;">
                        <p>No hay pacientes registrados a√∫n.</p>
                        <p style="font-size: 12px; margin-top: 8px;">
                            Usa la API para agregar pacientes o el panel de administraci√≥n de Django.
                        </p>
                    </td>
                </tr>
            {% endif %}
        </tbody>
    </table>
</div>

<div class="card">
    <h2>Informaci√≥n de la API</h2>
    <p>Para interactuar con los datos de pacientes, puedes usar los siguientes endpoints:</p>
    
    <div style="background: #f6f8fa; padding: 16px; border-radius: 6px; margin-top: 16px;">
        <h3 style="margin-bottom: 16px;">üîó Endpoints Interactivos:</h3>
        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 12px;">
            <a href="/api/pacientes/" class="btn btn-primary" target="_blank" style="text-decoration: none; display: block; padding: 12px; border-radius: 6px; background: #2da44e; color: white; text-align: center;">
                <strong>GET /api/pacientes/</strong><br>
                <small>Listar todos los pacientes</small>
            </a>
            <a href="/swagger/" class="btn btn-secondary" target="_blank" style="text-decoration: none; display: block; padding: 12px; border-radius: 6px; background: #f6f8fa; color: #24292f; text-align: center; border: 1px solid #d0d7de;">
                <strong>POST /api/pacientes/</strong><br>
                <small>Crear nuevo paciente (Swagger)</small>
            </a>
            <a href="/swagger/" class="btn btn-secondary" target="_blank" style="text-decoration: none; display: block; padding: 12px; border-radius: 6px; background: #f6f8fa; color: #24292f; text-align: center; border: 1px solid #d0d7de;">
                <strong>PUT/DELETE /api/pacientes/{id}/</strong><br>
                <small>Actualizar/Eliminar (Swagger)</small>
            </a>
        </div>
        <div style="margin-top: 16px; padding: 12px; background: #fff3cd; border: 1px solid #ffeaa7; border-radius: 6px;">
            <strong>üí° Tip:</strong> Usa Swagger para probar todas las operaciones CRUD de forma interactiva.
        </div>
    </div>
</div>

{% endblock %}
