{% extends 'gestion_clinica/base.html' %}

{% block title %}M√©dicos - Salud Vital{% endblock %}

{% block header_title %}M√©dicos{% endblock %}

{% block content %}
<div class="card">
    <h2>üë®‚Äç‚öïÔ∏è Gesti√≥n de M√©dicos</h2>
    <p>Administra la informaci√≥n del personal m√©dico y sus especialidades.</p>
    
    <div style="margin-top: 16px;">
        <a href="{% url 'home' %}" class="btn btn-secondary">‚Üê Volver al Inicio</a>
        <a href="{% url 'medico-create' %}" class="btn btn-primary">+ Agregar M√©dico</a>
        <a href="/swagger/" class="btn btn-secondary" target="_blank">Ver API Docs</a>
    </div>
</div>

<div class="card">
    <h2>Lista de M√©dicos</h2>
    <p>Personal m√©dico registrado en el sistema.</p>
    
    <table class="table">
        <thead>
            <tr>
                <th>RUT</th>
                <th>Nombre</th>
                <th>Apellido</th>
                <th>Especialidad</th>
                <th>Email</th>
                <th>Tel√©fono</th>
                <th>Estado</th>
                <th>Acciones</th>
            </tr>
        </thead>
        <tbody>
            {% if medicos %}
                {% for medico in medicos %}
                <tr>
                    <td>{{ medico.rut }}</td>
                    <td>{{ medico.nombre }}</td>
                    <td>{{ medico.apellido }}</td>
                    <td>{{ medico.especialidad.nombre }}</td>
                    <td>{{ medico.correo }}</td>
                    <td>{{ medico.telefono }}</td>
                    <td>
                        <span style="color: {% if medico.activo %}#2da44e{% else %}#d73a49{% endif %};">
                            {% if medico.activo %}Activo{% else %}Inactivo{% endif %}
                        </span>
                    </td>
                    <td>
                        <a href="{% url 'medico-edit' medico.id %}" class="btn btn-secondary" style="margin-right: 8px; text-decoration: none;">Editar</a>
                        <a href="{% url 'medico-delete' medico.id %}" class="btn" style="background-color: #d73a49; color: white; text-decoration: none;">Eliminar</a>
                    </td>
                </tr>
                {% endfor %}
            {% else %}
                <tr>
                    <td colspan="8" style="text-align: center; color: #656d76; padding: 24px;">
                        <p>No hay m√©dicos registrados a√∫n.</p>
                        <p style="font-size: 12px; margin-top: 8px;">
                            Usa la API para agregar m√©dicos o el panel de administraci√≥n de Django.
                        </p>
                    </td>
                </tr>
            {% endif %}
        </tbody>
    </table>
</div>

<div class="card">
    <h2>Informaci√≥n de la API</h2>
    <p>Endpoints disponibles para la gesti√≥n de m√©dicos:</p>
    
    <div style="background: #f6f8fa; padding: 16px; border-radius: 6px; margin-top: 16px;">
        <h3 style="margin-bottom: 8px;">Endpoints disponibles:</h3>
        <ul style="list-style: none; padding: 0;">
            <li style="margin-bottom: 4px;"><code>GET /api/medicos/</code> - Listar todos los m√©dicos</li>
            <li style="margin-bottom: 4px;"><code>POST /api/medicos/</code> - Crear un nuevo m√©dico</li>
            <li style="margin-bottom: 4px;"><code>GET /api/medicos/{id}/</code> - Obtener un m√©dico espec√≠fico</li>
            <li style="margin-bottom: 4px;"><code>PUT /api/medicos/{id}/</code> - Actualizar un m√©dico</li>
            <li style="margin-bottom: 4px;"><code>DELETE /api/medicos/{id}/</code> - Eliminar un m√©dico</li>
        </ul>
    </div>
</div>
{% endblock %}
